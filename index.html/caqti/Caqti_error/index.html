<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Caqti_error (caqti.Caqti_error)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">caqti</a> &#x00BB; Caqti_error</nav><header class="odoc-preamble"><h1>Module <code><span>Caqti_error</span></code></h1><p>Error descriptors.</p></header><nav class="odoc-toc"><ul><li><a href="#error-causes">Error Causes</a></li><li><a href="#messages">Messages</a></li><li><a href="#messages-with-metadata">Messages with Metadata</a></li><li><a href="#documented-constructors">Documented Constructors</a><ul><li><a href="#errors-during-driver-loading">Errors during Driver Loading</a></li><li><a href="#errors-during-connect">Errors during Connect</a></li><li><a href="#errors-during-call">Errors during Call</a></li><li><a href="#errors-during-result-retrieval">Errors during Result Retrieval</a></li></ul></li><li><a href="#specific-error-types">Specific Error Types</a></li><li><a href="#generic-error-type-and-functions">Generic Error Type and Functions</a></li></ul></nav><div class="odoc-content"><h3 id="error-causes"><a href="#error-causes" class="anchor"></a>Error Causes</h3><p>The <a href="#type-cause"><code>cause</code></a> type is an incomplete enumeration of consolidated causes of errors between different database systems. The selection includes the causes which are believed to be useful to handle and excludes causes which are specific to the implementation of a certain database system.</p><p>The causes are classified into subtypes to help matching them collectively. Each subtype has a fall-back case which is used if the database system does not clearly report one of the specific cases. An condition which is reported as the fall-back case may in a future version be reported as a specific case, possibly adding a new case to the subtype. Therefore, for backwards compatibility you should match the full subtype rather than the fall-back, e.g.</p><pre class="language-ocaml"><code>(match Caqti_error.cause error with
 | `Unique_violation -&gt; handle_unique_violation ()
 | #integrity_constraint_violation -&gt; handle_other_constraint_violation ()
 | _ -&gt; handle_other_error ())</code></pre><p>This ensures that your code stil compiles when a new case is added to <a href="#type-integrity_constraint_violation"><code>integrity_constraint_violation</code></a>, and that the error condition receiving mapped to the new case is still handled by the subtype pattern when you link to the new version of Caqti.</p><p>Currently we do not have access to the extended error codes from SQLite3, meaning that all integrity constraint violation conditions will be reported as <code>`Integrity_constraint_violation__don't_match</code>.</p><p>Since the consolitation of each error condition requires some investitation and testing, the selection made is very conservative. If you need to handle an error which is currently unlisted, please open an issue or create a pull request. A pull request should, if possible, include a extension of <code>test_error_cause.ml</code> to demonstrate how the error is triggered by the database systems.</p><div class="odoc-spec"><div class="spec type anchored" id="type-integrity_constraint_violation"><a href="#type-integrity_constraint_violation" class="anchor"></a><code><span><span class="keyword">type</span> integrity_constraint_violation</span><span> = </span><span>[ </span></code><ol><li id="type-integrity_constraint_violation.Restrict_violation" class="def variant constructor anchored"><a href="#type-integrity_constraint_violation.Restrict_violation" class="anchor"></a><code><span>| </span><span>`Restrict_violation</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>This is meant to indicate that a deletion or update would cause a foreign key violation, although this may be reported as a <code>`Foreign_key_violation</code>.</p><span class="comment-delim">*)</span></div></li><li id="type-integrity_constraint_violation.Not_null_violation" class="def variant constructor anchored"><a href="#type-integrity_constraint_violation.Not_null_violation" class="anchor"></a><code><span>| </span><span>`Not_null_violation</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>An insertion or update attempts to assign a <code>NULL</code> value to column having a <code>NOT NULL</code> constraint.</p><span class="comment-delim">*)</span></div></li><li id="type-integrity_constraint_violation.Foreign_key_violation" class="def variant constructor anchored"><a href="#type-integrity_constraint_violation.Foreign_key_violation" class="anchor"></a><code><span>| </span><span>`Foreign_key_violation</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>An modification would cause a column to reference a non-existing key. This cause may also be reported for cases which should have been covered by <code>`Restrict_violation</code>.</p><span class="comment-delim">*)</span></div></li><li id="type-integrity_constraint_violation.Unique_violation" class="def variant constructor anchored"><a href="#type-integrity_constraint_violation.Unique_violation" class="anchor"></a><code><span>| </span><span>`Unique_violation</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>An insertion or update would duplicate a key as declared by a <code>UNIQUE</code> or <code>PRIMARY KEY</code> constraint.</p><span class="comment-delim">*)</span></div></li><li id="type-integrity_constraint_violation.Check_violation" class="def variant constructor anchored"><a href="#type-integrity_constraint_violation.Check_violation" class="anchor"></a><code><span>| </span><span>`Check_violation</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>A requested change would violate a <code>CHECK</code> constraint.</p><span class="comment-delim">*)</span></div></li><li id="type-integrity_constraint_violation.Exclusion_violation" class="def variant constructor anchored"><a href="#type-integrity_constraint_violation.Exclusion_violation" class="anchor"></a><code><span>| </span><span>`Exclusion_violation</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>A requested insertion or update would cause an overlap of rows according to an <code>EXCLUDE</code> constraint.</p><span class="comment-delim">*)</span></div></li><li id="type-integrity_constraint_violation.Integrity_constraint_violation__don't_match" class="def variant constructor anchored"><a href="#type-integrity_constraint_violation.Integrity_constraint_violation__don't_match" class="anchor"></a><code><span>| </span><span>`Integrity_constraint_violation__don't_match</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>An yet unclassified cause; match the full subtype instead.</p><span class="comment-delim">*)</span></div></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>A subtype of <a href="#type-cause"><code>cause</code></a> informing about violation of SQL constraints.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-insufficient_resources"><a href="#type-insufficient_resources" class="anchor"></a><code><span><span class="keyword">type</span> insufficient_resources</span><span> = </span><span>[ </span></code><ol><li id="type-insufficient_resources.Disk_full" class="def variant constructor anchored"><a href="#type-insufficient_resources.Disk_full" class="anchor"></a><code><span>| </span><span>`Disk_full</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The server is out of disk space.</p><span class="comment-delim">*)</span></div></li><li id="type-insufficient_resources.Out_of_memory" class="def variant constructor anchored"><a href="#type-insufficient_resources.Out_of_memory" class="anchor"></a><code><span>| </span><span>`Out_of_memory</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The server is out of memory</p><span class="comment-delim">*)</span></div></li><li id="type-insufficient_resources.Too_many_connections" class="def variant constructor anchored"><a href="#type-insufficient_resources.Too_many_connections" class="anchor"></a><code><span>| </span><span>`Too_many_connections</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The server does not accept establishing more connections.</p><span class="comment-delim">*)</span></div></li><li id="type-insufficient_resources.Configuration_limit_exceeded" class="def variant constructor anchored"><a href="#type-insufficient_resources.Configuration_limit_exceeded" class="anchor"></a><code><span>| </span><span>`Configuration_limit_exceeded</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Some unspecific server limit is exceeded.</p><span class="comment-delim">*)</span></div></li><li id="type-insufficient_resources.Insufficient_resources__don't_match" class="def variant constructor anchored"><a href="#type-insufficient_resources.Insufficient_resources__don't_match" class="anchor"></a><code><span>| </span><span>`Insufficient_resources__don't_match</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>An yet unclassified cause; match the full subtype instead.</p><span class="comment-delim">*)</span></div></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>A subtype of <a href="#type-cause"><code>cause</code></a> informing about insufficient resources on the server side.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-cause"><a href="#type-cause" class="anchor"></a><code><span><span class="keyword">type</span> cause</span><span> = </span><span>[ </span></code><ol><li id="type-cause.integrity_constraint_violation" class="def variant type anchored"><a href="#type-cause.integrity_constraint_violation" class="anchor"></a><code><span>| </span><span><a href="#type-integrity_constraint_violation">integrity_constraint_violation</a></span></code></li><li id="type-cause.insufficient_resources" class="def variant type anchored"><a href="#type-cause.insufficient_resources" class="anchor"></a><code><span>| </span><span><a href="#type-insufficient_resources">insufficient_resources</a></span></code></li><li id="type-cause.Unspecified__don't_match" class="def variant constructor anchored"><a href="#type-cause.Unspecified__don't_match" class="anchor"></a><code><span>| </span><span>`Unspecified__don't_match</span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>The selection of causes of errors which have been mapped.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_cause"><a href="#val-show_cause" class="anchor"></a><code><span><span class="keyword">val</span> show_cause : <span><span>[&lt; <a href="#type-cause">cause</a> ]</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><h3 id="messages"><a href="#messages" class="anchor"></a>Messages</h3><div class="odoc-spec"><div class="spec type anchored" id="type-msg"><a href="#type-msg" class="anchor"></a><code><span><span class="keyword">type</span> msg</span><span> = </span><span>..</span></code></div><div class="spec-doc"><p>In this type, drivers can stash information about any errors in their own format, which can later be used for pretty-printing and or future operations. Drivers must call <a href="#val-define_msg"><code>define_msg</code></a> on each constructor added to this type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-define_msg"><a href="#val-define_msg" class="anchor"></a><code><span><span class="keyword">val</span> define_msg : 
  <span><span class="label">pp</span>:<span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-msg">msg</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?cause</span>:<span>(<span><a href="#type-msg">msg</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-cause">cause</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>extension_constructor <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Mandatory registration of pretty-printer for a driver-supplied error descriptor.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_msg"><a href="#val-pp_msg" class="anchor"></a><code><span><span class="keyword">val</span> pp_msg : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-msg">msg</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp_msg ppf msg</code> formats <code>msg</code> on <code>ppf</code>.</p></div></div><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Msg"><a href="#extension-decl-Msg" class="anchor"></a><code><span><span class="keyword">type</span> <a href="#type-msg">msg</a> += </span></code><ol><li id="extension-Msg" class="def variant extension anchored"><a href="#extension-Msg" class="anchor"></a><code><span>| </span><span><span class="extension">Msg</span> : string <span class="arrow">&#45;&gt;</span> <a href="#type-msg">msg</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The shape of locally generated messages and messages from drivers without dedicated error type.</p><span class="comment-delim">*)</span></div></li></ol></div></div><h3 id="messages-with-metadata"><a href="#messages-with-metadata" class="anchor"></a>Messages with Metadata</h3><p><b>Note.</b> Please consider the fields internal for now, they may still be revised or hidden.</p><div class="odoc-spec"><div class="spec type anchored" id="type-load_error"><a href="#type-load_error" class="anchor"></a><code><span><span class="keyword">type</span> load_error</span><span> = <span class="keyword">private</span> </span><span>{</span></code><ol><li id="type-load_error.uri" class="def record field anchored"><a href="#type-load_error.uri" class="anchor"></a><code><span>uri : <span class="xref-unresolved">Uri</span>.t;</span></code></li><li id="type-load_error.msg" class="def record field anchored"><a href="#type-load_error.msg" class="anchor"></a><code><span>msg : <a href="#type-msg">msg</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-connection_error"><a href="#type-connection_error" class="anchor"></a><code><span><span class="keyword">type</span> connection_error</span><span> = <span class="keyword">private</span> </span><span>{</span></code><ol><li id="type-connection_error.uri" class="def record field anchored"><a href="#type-connection_error.uri" class="anchor"></a><code><span>uri : <span class="xref-unresolved">Uri</span>.t;</span></code></li><li id="type-connection_error.msg" class="def record field anchored"><a href="#type-connection_error.msg" class="anchor"></a><code><span>msg : <a href="#type-msg">msg</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-query_error"><a href="#type-query_error" class="anchor"></a><code><span><span class="keyword">type</span> query_error</span><span> = <span class="keyword">private</span> </span><span>{</span></code><ol><li id="type-query_error.uri" class="def record field anchored"><a href="#type-query_error.uri" class="anchor"></a><code><span>uri : <span class="xref-unresolved">Uri</span>.t;</span></code></li><li id="type-query_error.query" class="def record field anchored"><a href="#type-query_error.query" class="anchor"></a><code><span>query : string;</span></code></li><li id="type-query_error.msg" class="def record field anchored"><a href="#type-query_error.msg" class="anchor"></a><code><span>msg : <a href="#type-msg">msg</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-coding_error"><a href="#type-coding_error" class="anchor"></a><code><span><span class="keyword">type</span> coding_error</span><span> = <span class="keyword">private</span> </span><span>{</span></code><ol><li id="type-coding_error.uri" class="def record field anchored"><a href="#type-coding_error.uri" class="anchor"></a><code><span>uri : <span class="xref-unresolved">Uri</span>.t;</span></code></li><li id="type-coding_error.typ" class="def record field anchored"><a href="#type-coding_error.typ" class="anchor"></a><code><span>typ : <a href="../Caqti_type/index.html#type-any">Caqti_type.any</a>;</span></code></li><li id="type-coding_error.msg" class="def record field anchored"><a href="#type-coding_error.msg" class="anchor"></a><code><span>msg : <a href="#type-msg">msg</a>;</span></code></li></ol><code><span>}</span></code></div></div><h3 id="documented-constructors"><a href="#documented-constructors" class="anchor"></a>Documented Constructors</h3><h4 id="errors-during-driver-loading"><a href="#errors-during-driver-loading" class="anchor"></a>Errors during Driver Loading</h4><div class="odoc-spec"><div class="spec value anchored" id="val-load_rejected"><a href="#val-load_rejected" class="anchor"></a><code><span><span class="keyword">val</span> load_rejected : <span><span class="label">uri</span>:<span class="xref-unresolved">Uri</span>.t <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-msg">msg</a> <span class="arrow">&#45;&gt;</span></span> <span>[&gt; <span>`Load_rejected of <a href="#type-load_error">load_error</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>load_rejected ~uri msg</code> indicates that a driver could not be identified from <code>uri</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-load_failed"><a href="#val-load_failed" class="anchor"></a><code><span><span class="keyword">val</span> load_failed : <span><span class="label">uri</span>:<span class="xref-unresolved">Uri</span>.t <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-msg">msg</a> <span class="arrow">&#45;&gt;</span></span> <span>[&gt; <span>`Load_failed of <a href="#type-load_error">load_error</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>load_failed ~uri msg</code> indicates that a driver for <code>uri</code> could not be loaded.</p></div></div><h4 id="errors-during-connect"><a href="#errors-during-connect" class="anchor"></a>Errors during Connect</h4><div class="odoc-spec"><div class="spec value anchored" id="val-connect_rejected"><a href="#val-connect_rejected" class="anchor"></a><code><span><span class="keyword">val</span> connect_rejected : 
  <span><span class="label">uri</span>:<span class="xref-unresolved">Uri</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-msg">msg</a> <span class="arrow">&#45;&gt;</span></span>
  <span>[&gt; <span>`Connect_rejected of <a href="#type-connection_error">connection_error</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>connect_rejected ~uri msg</code> indicates that the driver rejected the URI.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-connect_failed"><a href="#val-connect_failed" class="anchor"></a><code><span><span class="keyword">val</span> connect_failed : 
  <span><span class="label">uri</span>:<span class="xref-unresolved">Uri</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-msg">msg</a> <span class="arrow">&#45;&gt;</span></span>
  <span>[&gt; <span>`Connect_failed of <a href="#type-connection_error">connection_error</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>connect_failed ~uri msg</code> indicates that the driver failed to establish a connection to the database.</p></div></div><h4 id="errors-during-call"><a href="#errors-during-call" class="anchor"></a>Errors during Call</h4><div class="odoc-spec"><div class="spec value anchored" id="val-encode_missing"><a href="#val-encode_missing" class="anchor"></a><code><span><span class="keyword">val</span> encode_missing : 
  <span><span class="label">uri</span>:<span class="xref-unresolved">Uri</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">field_type</span>:<span><span class="type-var">'a</span> <a href="../Caqti_type/Field/index.html#type-t">Caqti_type.Field.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span>[&gt; <span>`Encode_rejected of <a href="#type-coding_error">coding_error</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>encode_missing ~uri ~field_type ()</code> indicates that the driver does not support <code>field_type</code> and no fallback encoding is available for the type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-encode_rejected"><a href="#val-encode_rejected" class="anchor"></a><code><span><span class="keyword">val</span> encode_rejected : 
  <span><span class="label">uri</span>:<span class="xref-unresolved">Uri</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">typ</span>:<span><span class="type-var">'a</span> <a href="../Caqti_type/index.html#type-t">Caqti_type.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-msg">msg</a> <span class="arrow">&#45;&gt;</span></span>
  <span>[&gt; <span>`Encode_rejected of <a href="#type-coding_error">coding_error</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>encode_rejected ~uri ~typ msg</code> indicates that encoding a value to <code>typ</code> failed, e.g. due to being out of range.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-encode_failed"><a href="#val-encode_failed" class="anchor"></a><code><span><span class="keyword">val</span> encode_failed : 
  <span><span class="label">uri</span>:<span class="xref-unresolved">Uri</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">typ</span>:<span><span class="type-var">'a</span> <a href="../Caqti_type/index.html#type-t">Caqti_type.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-msg">msg</a> <span class="arrow">&#45;&gt;</span></span>
  <span>[&gt; <span>`Encode_failed of <a href="#type-coding_error">coding_error</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>encode_failed ~uri ~typ msg</code> indicates that a parameter of type <code>typ</code> was not accepted by the database client library.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-request_failed"><a href="#val-request_failed" class="anchor"></a><code><span><span class="keyword">val</span> request_failed : 
  <span><span class="label">uri</span>:<span class="xref-unresolved">Uri</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">query</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-msg">msg</a> <span class="arrow">&#45;&gt;</span></span>
  <span>[&gt; <span>`Request_failed of <a href="#type-query_error">query_error</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>request_failed ~uri ~query msg</code> indicates that the request could not be transmitted to the database, that the database was not ready to process the request, or that something went wrong while processing the request.</p></div></div><h4 id="errors-during-result-retrieval"><a href="#errors-during-result-retrieval" class="anchor"></a>Errors during Result Retrieval</h4><div class="odoc-spec"><div class="spec value anchored" id="val-decode_missing"><a href="#val-decode_missing" class="anchor"></a><code><span><span class="keyword">val</span> decode_missing : 
  <span><span class="label">uri</span>:<span class="xref-unresolved">Uri</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">field_type</span>:<span><span class="type-var">'a</span> <a href="../Caqti_type/Field/index.html#type-t">Caqti_type.Field.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span>[&gt; <span>`Decode_rejected of <a href="#type-coding_error">coding_error</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>decode_missing ~uri ~field_type ()</code> indicates that the driver does not support <code>field_type</code> for decoding result rows.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-decode_rejected"><a href="#val-decode_rejected" class="anchor"></a><code><span><span class="keyword">val</span> decode_rejected : 
  <span><span class="label">uri</span>:<span class="xref-unresolved">Uri</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">typ</span>:<span><span class="type-var">'a</span> <a href="../Caqti_type/index.html#type-t">Caqti_type.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-msg">msg</a> <span class="arrow">&#45;&gt;</span></span>
  <span>[&gt; <span>`Decode_rejected of <a href="#type-coding_error">coding_error</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>decode_rejected ~uri ~typ msg</code> indicates that the driver could not decode a field of type <code>typ</code> from the returned row, e.g. due to an invalid value or limited range of the target type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-response_failed"><a href="#val-response_failed" class="anchor"></a><code><span><span class="keyword">val</span> response_failed : 
  <span><span class="label">uri</span>:<span class="xref-unresolved">Uri</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">query</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-msg">msg</a> <span class="arrow">&#45;&gt;</span></span>
  <span>[&gt; <span>`Response_failed of <a href="#type-query_error">query_error</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>response_failed ~uri ~query msg</code> indicates that something when wrong while fetching a delayed part of the response.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-response_rejected"><a href="#val-response_rejected" class="anchor"></a><code><span><span class="keyword">val</span> response_rejected : 
  <span><span class="label">uri</span>:<span class="xref-unresolved">Uri</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">query</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-msg">msg</a> <span class="arrow">&#45;&gt;</span></span>
  <span>[&gt; <span>`Response_rejected of <a href="#type-query_error">query_error</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>response_rejected ~uri ~query msg</code> indicates that the response from the database was rejected due to requirements posed by client code.</p></div></div><h3 id="specific-error-types"><a href="#specific-error-types" class="anchor"></a>Specific Error Types</h3><div class="odoc-spec"><div class="spec type anchored" id="type-call"><a href="#type-call" class="anchor"></a><code><span><span class="keyword">type</span> call</span><span> = </span><span>[ </span></code><ol><li id="type-call.Encode_rejected" class="def variant constructor anchored"><a href="#type-call.Encode_rejected" class="anchor"></a><code><span>| </span><span>`Encode_rejected <span class="keyword">of</span> <a href="#type-coding_error">coding_error</a></span></code></li><li id="type-call.Encode_failed" class="def variant constructor anchored"><a href="#type-call.Encode_failed" class="anchor"></a><code><span>| </span><span>`Encode_failed <span class="keyword">of</span> <a href="#type-coding_error">coding_error</a></span></code></li><li id="type-call.Request_failed" class="def variant constructor anchored"><a href="#type-call.Request_failed" class="anchor"></a><code><span>| </span><span>`Request_failed <span class="keyword">of</span> <a href="#type-query_error">query_error</a></span></code></li><li id="type-call.Response_rejected" class="def variant constructor anchored"><a href="#type-call.Response_rejected" class="anchor"></a><code><span>| </span><span>`Response_rejected <span class="keyword">of</span> <a href="#type-query_error">query_error</a></span></code></li></ol><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-retrieve"><a href="#type-retrieve" class="anchor"></a><code><span><span class="keyword">type</span> retrieve</span><span> = </span><span>[ </span></code><ol><li id="type-retrieve.Decode_rejected" class="def variant constructor anchored"><a href="#type-retrieve.Decode_rejected" class="anchor"></a><code><span>| </span><span>`Decode_rejected <span class="keyword">of</span> <a href="#type-coding_error">coding_error</a></span></code></li><li id="type-retrieve.Request_failed" class="def variant constructor anchored"><a href="#type-retrieve.Request_failed" class="anchor"></a><code><span>| </span><span>`Request_failed <span class="keyword">of</span> <a href="#type-query_error">query_error</a></span></code></li><li id="type-retrieve.Response_failed" class="def variant constructor anchored"><a href="#type-retrieve.Response_failed" class="anchor"></a><code><span>| </span><span>`Response_failed <span class="keyword">of</span> <a href="#type-query_error">query_error</a></span></code></li><li id="type-retrieve.Response_rejected" class="def variant constructor anchored"><a href="#type-retrieve.Response_rejected" class="anchor"></a><code><span>| </span><span>`Response_rejected <span class="keyword">of</span> <a href="#type-query_error">query_error</a></span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>Errors which may occur during retrival of result rows. This includes <code>`Request_failed</code> since the request is fused with retrieval for the pgx driver.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-call_or_retrieve"><a href="#type-call_or_retrieve" class="anchor"></a><code><span><span class="keyword">type</span> call_or_retrieve</span><span> = </span><span>[ </span></code><ol><li id="type-call_or_retrieve.call" class="def variant type anchored"><a href="#type-call_or_retrieve.call" class="anchor"></a><code><span>| </span><span><a href="#type-call">call</a></span></code></li><li id="type-call_or_retrieve.retrieve" class="def variant type anchored"><a href="#type-call_or_retrieve.retrieve" class="anchor"></a><code><span>| </span><span><a href="#type-retrieve">retrieve</a></span></code></li></ol><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-transact"><a href="#type-transact" class="anchor"></a><code><span><span class="keyword">type</span> transact</span><span> = </span><span>[ </span></code><ol><li id="type-transact.call" class="def variant type anchored"><a href="#type-transact.call" class="anchor"></a><code><span>| </span><span><a href="#type-call">call</a></span></code></li><li id="type-transact.retrieve" class="def variant type anchored"><a href="#type-transact.retrieve" class="anchor"></a><code><span>| </span><span><a href="#type-retrieve">retrieve</a></span></code></li></ol><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-load"><a href="#type-load" class="anchor"></a><code><span><span class="keyword">type</span> load</span><span> = </span><span>[ </span></code><ol><li id="type-load.Load_rejected" class="def variant constructor anchored"><a href="#type-load.Load_rejected" class="anchor"></a><code><span>| </span><span>`Load_rejected <span class="keyword">of</span> <a href="#type-load_error">load_error</a></span></code></li><li id="type-load.Load_failed" class="def variant constructor anchored"><a href="#type-load.Load_failed" class="anchor"></a><code><span>| </span><span>`Load_failed <span class="keyword">of</span> <a href="#type-load_error">load_error</a></span></code></li></ol><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-connect"><a href="#type-connect" class="anchor"></a><code><span><span class="keyword">type</span> connect</span><span> = </span><span>[ </span></code><ol><li id="type-connect.Connect_rejected" class="def variant constructor anchored"><a href="#type-connect.Connect_rejected" class="anchor"></a><code><span>| </span><span>`Connect_rejected <span class="keyword">of</span> <a href="#type-connection_error">connection_error</a></span></code></li><li id="type-connect.Connect_failed" class="def variant constructor anchored"><a href="#type-connect.Connect_failed" class="anchor"></a><code><span>| </span><span>`Connect_failed <span class="keyword">of</span> <a href="#type-connection_error">connection_error</a></span></code></li><li id="type-connect.Post_connect" class="def variant constructor anchored"><a href="#type-connect.Post_connect" class="anchor"></a><code><span>| </span><span>`Post_connect <span class="keyword">of</span> <a href="#type-call_or_retrieve">call_or_retrieve</a></span></code></li></ol><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-load_or_connect"><a href="#type-load_or_connect" class="anchor"></a><code><span><span class="keyword">type</span> load_or_connect</span><span> = </span><span>[ </span></code><ol><li id="type-load_or_connect.load" class="def variant type anchored"><a href="#type-load_or_connect.load" class="anchor"></a><code><span>| </span><span><a href="#type-load">load</a></span></code></li><li id="type-load_or_connect.connect" class="def variant type anchored"><a href="#type-load_or_connect.connect" class="anchor"></a><code><span>| </span><span><a href="#type-connect">connect</a></span></code></li></ol><code><span> ]</span></code></div></div><h3 id="generic-error-type-and-functions"><a href="#generic-error-type-and-functions" class="anchor"></a>Generic Error Type and Functions</h3><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>[ </span></code><ol><li id="type-t.load" class="def variant type anchored"><a href="#type-t.load" class="anchor"></a><code><span>| </span><span><a href="#type-load">load</a></span></code></li><li id="type-t.connect" class="def variant type anchored"><a href="#type-t.connect" class="anchor"></a><code><span>| </span><span><a href="#type-connect">connect</a></span></code></li><li id="type-t.call" class="def variant type anchored"><a href="#type-t.call" class="anchor"></a><code><span>| </span><span><a href="#type-call">call</a></span></code></li><li id="type-t.retrieve" class="def variant type anchored"><a href="#type-t.retrieve" class="anchor"></a><code><span>| </span><span><a href="#type-retrieve">retrieve</a></span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>The full union of errors used by Caqti.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-uri"><a href="#val-uri" class="anchor"></a><code><span><span class="keyword">val</span> uri : <span><span>[&lt; <a href="#type-t">t</a> ]</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Uri</span>.t</span></code></div><div class="spec-doc"><p><code>uri error</code> is the URI of the connection used where <code>error</code> occurred.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span>[&lt; <a href="#type-t">t</a> ]</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp ppf error</code> prints an explanation of <code>error</code> on <code>ppf</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show"><a href="#val-show" class="anchor"></a><code><span><span class="keyword">val</span> show : <span><span>[&lt; <a href="#type-t">t</a> ]</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>show error</code> is an explanation of <code>error</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cause"><a href="#val-cause" class="anchor"></a><code><span><span class="keyword">val</span> cause : 
  <span><span>[&lt; <span>`Request_failed of <a href="#type-query_error">query_error</a></span> <span><span>| `Response_failed</span> of <a href="#type-query_error">query_error</a></span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-cause">cause</a></span></code></div><div class="spec-doc"><p>A matchable representation of the cause of the error, if available.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-counit"><a href="#type-counit" class="anchor"></a><code><span><span class="keyword">type</span> counit</span><span> = </span><span>|</span></code></div><div class="spec-doc"><p>An uninhabited type used by <a href="#val-uncongested"><code>uncongested</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-uncongested"><a href="#val-uncongested" class="anchor"></a><code><span><span class="keyword">val</span> uncongested : 
  <span><span><span>(<span class="type-var">'a</span>, <span>[&lt; <a href="#type-t">t</a> <span><span>| `Congested</span> of <a href="#type-counit">counit</a></span> ]</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span>, <span>[&gt; <a href="#type-t">t</a> ]</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>uncongested r</code> eliminates an unused <code>`Congested</code> case from the error.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Exn"><a href="#exception-Exn" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Exn</span> <span class="keyword">of</span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>Exn error</code> can be used when an exception is preferred over explicit error handling. The core Caqti API never raises exceptions which originate from runtime errors.</p></div></div></div></body></html>
