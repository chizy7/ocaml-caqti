<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Caqti_type (caqti.Caqti_type)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">caqti</a> &#x00BB; Caqti_type</nav><header class="odoc-preamble"><h1>Module <code><span>Caqti_type</span></code></h1><p>Type descriptors for fields and tuples.</p></header><nav class="odoc-toc"><ul><li><a href="#primitive-field-types">Primitive Field Types</a></li><li><a href="#row_types">Row Types</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec exception anchored" id="exception-Reject"><a href="#exception-Reject" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Reject</span> <span class="keyword">of</span> string</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-eq"><a href="#type-eq" class="anchor"></a><code><span><span class="keyword">type</span> <span>(_, _) eq</span></span><span> = </span></code><ol><li id="type-eq.Equal" class="def variant constructor anchored"><a href="#type-eq.Equal" class="anchor"></a><code><span>| </span><span><span class="constructor">Equal</span> : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'a</span>)</span> <a href="#type-eq">eq</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Type equality witness. This will eventually be replaced by the equavalent definition available in <code>Stdlib.Type</code> since OCaml 5.1, but for now, we must keep backwards compatibility with older compilers.</p><span class="comment-delim">*)</span></div></li></ol></div></div><h3 id="primitive-field-types"><a href="#primitive-field-types" class="anchor"></a>Primitive Field Types</h3><p>The following is normally only needed for drivers and to define new field types. Everything needed for common usage is covered in <a href="#row_types" title="row_types">Row Types</a>.</p><div class="odoc-spec"><div class="spec module anchored" id="module-Field"><a href="#module-Field" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Field/index.html">Field</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Facilities for extending and using primitive field types.</p></div></div><h3 id="row_types"><a href="#row_types" class="anchor"></a>Row Types</h3><div class="odoc-spec"><div class="spec type anchored" id="type-product_id"><a href="#type-product_id" class="anchor"></a><code><span><span class="keyword">type</span> <span>_ product_id</span></span></code></div><div class="spec-doc"><p>A type-carrying identifier used in <a href="#type-t"><code>t</code></a> to allow expressing equality predicates, including for associated values. <em>This is not part of the public API, but exposed due to its occurrence in <a href="#type-t"><code>t</code></a></em>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>_ t</span></span><span> = <span class="keyword">private</span> </span></code><ol><li id="type-t.Field" class="def variant constructor anchored"><a href="#type-t.Field" class="anchor"></a><code><span>| </span><span><span class="constructor">Field</span> : <span><span class="type-var">'a</span> <a href="Field/index.html#type-t">Field.t</a></span> <span class="arrow">&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></li><li id="type-t.Option" class="def variant constructor anchored"><a href="#type-t.Option" class="anchor"></a><code><span>| </span><span><span class="constructor">Option</span> : <span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span> <span><span><span class="type-var">'a</span> option</span> <a href="#type-t">t</a></span></span></code></li><li id="type-t.Product" class="def variant constructor anchored"><a href="#type-t.Product" class="anchor"></a><code><span>| </span><span><span class="constructor">Product</span> : <span><span class="type-var">'a</span> <a href="#type-product_id">product_id</a></span> * <span class="type-var">'i</span> * <span><span>(<span class="type-var">'a</span>, <span class="type-var">'i</span>)</span> <a href="#type-product">product</a></span> <span class="arrow">&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></li><li id="type-t.Annot" class="def variant constructor anchored"><a href="#type-t.Annot" class="anchor"></a><code><span>| </span><span><span class="constructor">Annot</span> : <span>[ `Redacted ]</span> * <span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></li></ol></div><div class="spec-doc"><p>Type descriptor for row types.</p><p><b>Note.</b> The concrete representation of this type should be considered private, including pattern-matching usage; use the below functions for compatibility with future versions.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-product"><a href="#type-product" class="anchor"></a><code><span><span class="keyword">and</span> <span>(_, _) product</span></span><span> = <span class="keyword">private</span> </span></code><ol><li id="type-product.Proj_end" class="def variant constructor anchored"><a href="#type-product.Proj_end" class="anchor"></a><code><span>| </span><span><span class="constructor">Proj_end</span> : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'a</span>)</span> <a href="#type-product">product</a></span></span></code></li><li id="type-product.Proj" class="def variant constructor anchored"><a href="#type-product.Proj" class="anchor"></a><code><span>| </span><span><span class="constructor">Proj</span> : <span><span class="type-var">'b</span> <a href="#type-t">t</a></span> * <span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> * <span><span>(<span class="type-var">'a</span>, <span class="type-var">'i</span>)</span> <a href="#type-product">product</a></span> <span class="arrow">&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'i</span>)</span> <a href="#type-product">product</a></span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-any"><a href="#type-any" class="anchor"></a><code><span><span class="keyword">type</span> any</span><span> = </span></code><ol><li id="type-any.Any" class="def variant constructor anchored"><a href="#type-any.Any" class="anchor"></a><code><span>| </span><span><span class="constructor">Any</span> : <span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span> <a href="#type-any">any</a></span></code></li></ol></div><div class="spec-doc"><p><a href="#type-t"><code>t</code></a> with existentially wrapped static type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unify"><a href="#val-unify" class="anchor"></a><code><span><span class="keyword">val</span> unify : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="#type-eq">eq</a></span> option</span></span></code></div><div class="spec-doc"><p>If <code>t1</code> and <code>t2</code> are the same row type representations, then <code>unify t1 t2</code> is the witness of the unification of their static type parameters, otherwise it is <code>None</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal_value"><a href="#val-equal_value" class="anchor"></a><code><span><span class="keyword">val</span> equal_value : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>equal_value t</code> is the equality predicate for values of row type <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-length"><a href="#val-length" class="anchor"></a><code><span><span class="keyword">val</span> length : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>length t</code> is the number of fields used to represent <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp ppf t</code> prints a human presentation of <code>t</code> on <code>ppf</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_any"><a href="#val-pp_any" class="anchor"></a><code><span><span class="keyword">val</span> pp_any : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-any">any</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp_any ppf t</code> prints a human presentation of <code>t</code> on <code>ppf</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_value"><a href="#val-pp_value" class="anchor"></a><code><span><span class="keyword">val</span> pp_value : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <a href="#type-t">t</a></span> * <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp_value ppf (t, v)</code> prints a human representation of <code>v</code> given the type descriptor <code>t</code>. This function is meant for debugging; the output is neither guaranteed to be consistent across releases nor to contain a complete record of the data.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show"><a href="#val-show" class="anchor"></a><code><span><span class="keyword">val</span> show : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>show t</code> is a human presentation of <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-field"><a href="#val-field" class="anchor"></a><code><span><span class="keyword">val</span> field : <span><span><span class="type-var">'a</span> <a href="Field/index.html#type-t">Field.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>field ft</code> is a row of a single field of type <code>ft</code>. This function can be used when adding new field types; use the below functions otherwise.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Std"><a href="#module-Std" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Std/index.html">Std</a></span><span> : 
  <a href="../Caqti_type_sig/module-type-Std/index.html">Caqti_type_sig.Std</a>
    <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="../Caqti_type_sig/module-type-Std/index.html#type-t">t</a></span> := <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <span>('a, 'i) <a href="../Caqti_type_sig/module-type-Std/index.html#type-product">product</a></span> := <span><span>(<span class="type-var">'a</span>, <span class="type-var">'i</span>)</span> <a href="#type-product">product</a></span></span></span></code></div><div class="spec-doc"><p>Standard type descriptors provided as a submodule for easy inclusion.</p></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../Caqti_type_sig/module-type-Std/index.html">Caqti_type_sig.Std</a>
  <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="../Caqti_type_sig/module-type-Std/index.html#type-t">t</a></span> := <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span>
   <span class="keyword">and</span> <span><span class="keyword">type</span> <span>('a, 'i) <a href="../Caqti_type_sig/module-type-Std/index.html#type-product">product</a></span> := <span><span>(<span class="type-var">'a</span>, <span class="type-var">'i</span>)</span> <a href="#type-product">product</a></span></span></span></code></summary><h4 id="field-types"><a href="#field-types" class="anchor"></a>Field Types</h4><p>The following types correspond to what usually fits in a single field of a result row or input parameter set.</p><div class="odoc-spec"><div class="spec value anchored" id="val-bool"><a href="#val-bool" class="anchor"></a><code><span><span class="keyword">val</span> bool : <span>bool <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>A <code>bool</code> mapped to <code>boolean</code> on the SQL side if supported, otherwise mapped to an integer.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int"><a href="#val-int" class="anchor"></a><code><span><span class="keyword">val</span> int : <span>int <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>An <code>int</code> mapped to a sufficiently wide integer on the SQL side.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int16"><a href="#val-int16" class="anchor"></a><code><span><span class="keyword">val</span> int16 : <span>int <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>An <code>int</code> mapped to a <code>smallint</code> (16 bits) on the SQL side.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int32"><a href="#val-int32" class="anchor"></a><code><span><span class="keyword">val</span> int32 : <span>int32 <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>An <code>int32</code> mapped to an <code>integer</code> (32 bits) on the SQL side.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int64"><a href="#val-int64" class="anchor"></a><code><span><span class="keyword">val</span> int64 : <span>int64 <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>An <code>int64</code> mapped to a <code>bigint</code> (64 bits) on the SQL side.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-float"><a href="#val-float" class="anchor"></a><code><span><span class="keyword">val</span> float : <span>float <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>A <code>float</code> mapped to <code>double precision</code> or (best alternative) on the SQL side. Serialization may be lossy (e.g. base 10 may be used), so even if both sides support IEEE 754 double precision numbers, there may be discrepancies in the last digits of the binary representaton.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string"><a href="#val-string" class="anchor"></a><code><span><span class="keyword">val</span> string : <span>string <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>An UTF-8 string. The database should accept UTF-8 if non-ASCII characters are present.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-octets"><a href="#val-octets" class="anchor"></a><code><span><span class="keyword">val</span> octets : <span>string <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>A <code>string</code> mapped to whichever type is used to represent binary data on the SQL side.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pdate"><a href="#val-pdate" class="anchor"></a><code><span><span class="keyword">val</span> pdate : <span><span class="xref-unresolved">Ptime</span>.t <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>A time truncated to a date and mapped to the SQL <code>date</code> type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ptime"><a href="#val-ptime" class="anchor"></a><code><span><span class="keyword">val</span> ptime : <span><span class="xref-unresolved">Ptime</span>.t <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>An absolute time with driver-dependent precision. This corresponds to an SQL <code>timestamp with time zone</code> or a suitable alternative where not available:</p><ul><li>MariaDB has <code>datetime</code> which is similar to the SQL <code>timestamp</code> and <code>timestamp</code> which is similar to the SQL <code>timestamp with time zone</code>, but the driver does not make the distinction. Caqti sets the session time zone to UTC to avoid misinterpretation, since time values are passed in both directions without time zones. Values have microsecond precision, but you will need to specify the desired precision in the database schema to avoid truncation.</li></ul><ul><li>PostgreSQL supports this type and it's a good option to avoid any time zone issues if used conistently both on the client side, in SQL expressions, and in the database schema. Note that <code>timestamp with
          time zone</code> is stored as UTC without time zone, taking up no more space then <code>timestamp</code>. The PostgreSQL <code>timestamp</code> type is problematic since how conversions work and the manual indicate that it is meant to be a local time, and since database columns of this type stores the value without conversion to UTC, it becomes prone to time zone changes. To mitigate the issue, Caqti sets the time zone of sessions to UTC.</li></ul><ul><li>Sqlite3 does not have a dedicated type for absolute time. The date and time is sent as strings expressed at the UTC time zone using same format that the SQLite <a href="https://sqlite.org/lang_datefunc.html">datetime</a> function and <code>CURRENT_TIMESTAMP</code> return, except for an additional three decimals to achive millisecond precision.</li></ul><p>It might seem better to use standard RFC3339 format, since it is accepted by the SQLite functions, but that would misorder some time values if mixed with the results of these functions, even just the &quot;Z&quot; suffix would misorder values with different precision.</p><p>Date and time values which comes from the database without time zone are interpreted as UTC. This is not necessarily correct, and it is highly recommended to use SQL types which are transmitted with time zone information, even if this is UTC.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ptime_span"><a href="#val-ptime_span" class="anchor"></a><code><span><span class="keyword">val</span> ptime_span : <span><span class="xref-unresolved">Ptime</span>.span <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>A period of time. If the database lacks a dedicated representation, the integer number of seconds is used.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-enum"><a href="#val-enum" class="anchor"></a><code><span><span class="keyword">val</span> enum : 
  <span><span class="label">encode</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">decode</span>:<span>(<span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, string)</span> <span class="xref-unresolved">Stdlib</span>.result</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>enum ~encode ~decode name</code> creates an enum type which on the SQL side is named <code>name</code>, with cases which are converted with <code>encode</code> and <code>decode</code> functions. This is implemented in terms of the <a href="Field/index.html#type-t.Enum"><code>Caqti_type.Field.t.Enum</code></a> field type.</p></div></div><h4 id="composite-types"><a href="#composite-types" class="anchor"></a>Composite Types</h4><div class="odoc-spec"><div class="spec value anchored" id="val-product"><a href="#val-product" class="anchor"></a><code><span><span class="keyword">val</span> product : <span><span class="type-var">'i</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'i</span>)</span> <a href="#type-product">product</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-proj"><a href="#val-proj" class="anchor"></a><code><span><span class="keyword">val</span> proj : <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'i</span>)</span> <a href="#type-product">product</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'i</span>)</span> <a href="#type-product">product</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-proj_end"><a href="#val-proj_end" class="anchor"></a><code><span><span class="keyword">val</span> proj_end : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'a</span>)</span> <a href="#type-product">product</a></span></span></code></div><div class="spec-doc"><p>Given a set of projection functions <code>p1 : t -&gt; t1</code>, ..., <code>pN : t -&gt; tN</code> and a function <code>intro : t1 -&gt; ... -&gt; tN -&gt; t</code> to reconstruct values of <code>t</code> from the projections,</p><pre class="language-ocaml"><code>product intro
  @@ proj t1 p1
  @@ ...
  @@ proj tN pN
  @@ proj_end</code></pre><p>defines a Caqti type for <code>t</code>, which on the database side will be represented by a consecutive list of fields corresponding to the types <code>t1</code>, ..., <code>tN</code>, each of which may be represented by multiple fields. That is, <code>intro [project1 x] ...  [projectN x]</code> is equivalent to <code>x</code> according to an enforced or effective abstraction of <code>t</code> deemed adequate for the application logic.</p><p><code>intro</code> may raise <a href="#exception-Reject"><code>Caqti_type.Reject</code></a> to indicate that a value cannot be constructed from the given arguments. Projection operators may also raise this exception to indicate that an object cannot be represented in the database, e.g. due to an overflow.</p><p>The above only states that <code>intro</code> is a left (pseudo-)inverse of the projections, which is what matters for a faithful representation of OCaml values. The opposite (projection functions being the left inverse of <code>intro</code>) may be relevant if the application needs preserve the database representation when updating objects.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-custom"><a href="#val-custom" class="anchor"></a><code><span><span class="keyword">val</span> custom : 
  <span><span class="label">encode</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, string)</span> <span class="xref-unresolved">Stdlib</span>.result</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">decode</span>:<span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, string)</span> <span class="xref-unresolved">Stdlib</span>.result</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>custom ~encode ~decode rep</code> creates a custom type represented by <code>rep</code>, where <code>encode</code> is used to encode parameters into <code>rep</code> and <code>decode</code> is used to decode result rows from <code>rep</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-option"><a href="#val-option" class="anchor"></a><code><span><span class="keyword">val</span> option : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> option</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>option t</code> turns a set of fields encoded as <code>t</code> into a correspending set of nullable fields. The encoder will encode <code>None</code> as into a tuple of <code>NULL</code> values and the decoder will return <code>None</code> if all fields are <code>NULL</code>.</p><p>If the type <code>t</code> itself is <code>option t'</code> for some <code>t'</code>, or contains nested tuples and options such that all field types are nested under an option type, then it would have been possible to decode an all-<code>NULL</code> segment of a row as <code>Some x</code> where <code>x</code> is a corresponding tuple-option-tree terminating in <code>None</code> values. The above paragraph resolves this ambiguity since it implies that the outermost option possible will be decoded as <code>None</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-redacted"><a href="#val-redacted" class="anchor"></a><code><span><span class="keyword">val</span> redacted : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>redacted t</code> is the same type as <code>t</code> but sealed as potentially containing sensitive information to be redacted from pretty-printers and logs.</p></div></div><h4 id="tuple-types"><a href="#tuple-types" class="anchor"></a>Tuple Types</h4><p>As a common case of composite types, constructors for tuples up to 12 components are predefined here. Higher tuples can be created with <a href="#val-product"><code>product</code></a>.</p><div class="odoc-spec"><div class="spec value anchored" id="val-unit"><a href="#val-unit" class="anchor"></a><code><span><span class="keyword">val</span> unit : <span>unit <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>A type holding no fields. This is used to pass no parameters and as the result for queries which does not return any rows. It can also be nested in tuples, in which case it will not contribute to the total number of fields.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-t2"><a href="#val-t2" class="anchor"></a><code><span><span class="keyword">val</span> t2 : <span><span><span class="type-var">'a1</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a2</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a1</span> * <span class="type-var">'a2</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Creates a pair type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-t3"><a href="#val-t3" class="anchor"></a><code><span><span class="keyword">val</span> t3 : <span><span><span class="type-var">'a1</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a2</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a3</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Creates a 3-tuple type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-t4"><a href="#val-t4" class="anchor"></a><code><span><span class="keyword">val</span> t4 : <span><span><span class="type-var">'a1</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a2</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a3</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a4</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Creates a 4-tuple type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-t5"><a href="#val-t5" class="anchor"></a><code><span><span class="keyword">val</span> t5 : 
  <span><span><span class="type-var">'a1</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a2</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a3</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a4</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a5</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span> * <span class="type-var">'a5</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Creates a 5-tuple type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-t6"><a href="#val-t6" class="anchor"></a><code><span><span class="keyword">val</span> t6 : 
  <span><span><span class="type-var">'a1</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a2</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a3</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a4</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a5</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a6</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span> * <span class="type-var">'a5</span> * <span class="type-var">'a6</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Creates a 6-tuple type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-t7"><a href="#val-t7" class="anchor"></a><code><span><span class="keyword">val</span> t7 : 
  <span><span><span class="type-var">'a1</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a2</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a3</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a4</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a5</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a6</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a7</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span> * <span class="type-var">'a5</span> * <span class="type-var">'a6</span> * <span class="type-var">'a7</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Creates a 7-tuple type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-t8"><a href="#val-t8" class="anchor"></a><code><span><span class="keyword">val</span> t8 : 
  <span><span><span class="type-var">'a1</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a2</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a3</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a4</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a5</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a6</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a7</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a8</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span> * <span class="type-var">'a5</span> * <span class="type-var">'a6</span> * <span class="type-var">'a7</span> * <span class="type-var">'a8</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Creates a 8-tuple type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-t9"><a href="#val-t9" class="anchor"></a><code><span><span class="keyword">val</span> t9 : 
  <span><span><span class="type-var">'a1</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a2</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a3</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a4</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a5</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a6</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a7</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a8</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a9</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span> * <span class="type-var">'a5</span> * <span class="type-var">'a6</span> * <span class="type-var">'a7</span> * <span class="type-var">'a8</span> * <span class="type-var">'a9</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Creates a 9-tuple type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-t10"><a href="#val-t10" class="anchor"></a><code><span><span class="keyword">val</span> t10 : 
  <span><span><span class="type-var">'a1</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a2</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a3</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a4</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a5</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a6</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a7</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a8</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a9</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a10</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span> * <span class="type-var">'a5</span> * <span class="type-var">'a6</span> * <span class="type-var">'a7</span> * <span class="type-var">'a8</span> * <span class="type-var">'a9</span> * <span class="type-var">'a10</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Creates a 10-tuple type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-t11"><a href="#val-t11" class="anchor"></a><code><span><span class="keyword">val</span> t11 : 
  <span><span><span class="type-var">'a1</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a2</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a3</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a4</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a5</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a6</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a7</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a8</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a9</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a10</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a11</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span> * <span class="type-var">'a5</span> * <span class="type-var">'a6</span> * <span class="type-var">'a7</span> * <span class="type-var">'a8</span> * <span class="type-var">'a9</span> * <span class="type-var">'a10</span> * <span class="type-var">'a11</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Creates a 11-tuple type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-t12"><a href="#val-t12" class="anchor"></a><code><span><span class="keyword">val</span> t12 : 
  <span><span><span class="type-var">'a1</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a2</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a3</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a4</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a5</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a6</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a7</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a8</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a9</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a10</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a11</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a12</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span> * <span class="type-var">'a5</span> * <span class="type-var">'a6</span> * <span class="type-var">'a7</span> * <span class="type-var">'a8</span> * <span class="type-var">'a9</span> * <span class="type-var">'a10</span> * <span class="type-var">'a11</span> * <span class="type-var">'a12</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Creates a 12-tuple type.</p></div></div></details></div></div></body></html>
